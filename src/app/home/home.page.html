<ion-header>
  <ion-toolbar>
    <ion-title>Home</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngFor="let post of posts" class="post-card">
    <!-- En-t√™te -->
    <div class="post-header">
      <ion-avatar>
        <img [src]="post.author?.photoURL || 'assets/default-profile.png'" alt="Profile Photo" />
      </ion-avatar>
      <div class="post-author-details">
        <h3>{{ post.author?.firstName }} {{ post.author?.lastName }}</h3>
        <p>{{ post.author?.institution || 'User Description' }}</p>
        <p>{{ post.relativeTime }}</p>
        <span>{{ post.timestamp | date: 'short' }}</span>
      </div>
    </div>

    <!-- Contenu de la publication -->
    <div class="post-content">
      <p class="post-title">{{ post.title }}</p>
      <p class="post-body">{{ post.content }}</p>
      <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Post Image" class="post-image" />
    </div>

    <!-- Pied de publication -->
    <div class="post-footer">
      <div class="post-likes">
        <p>
          {{ post.likedBy?.length || 0 }} personnes ont aim√©
        </p>
      </div>
      <div class="post-actions">
        <ion-button fill="clear" [disabled]="post.userHasLiked" (click)="likePost(post)">
          ‚ù§Ô∏è J'aime
        </ion-button>
        <ion-button fill="clear" (click)="addComment(post)">üí¨ Commenter</ion-button>
        <ion-button fill="clear">üîó Partager</ion-button>
      </div>
      <div class="post-comment-box">
        <ion-input placeholder="Ajouter un commentaire..." [(ngModel)]="post.newComment"></ion-input>
        <ion-button (click)="addComment(post)">Envoyer</ion-button>
      </div>
    </div>
  </div>
</ion-content>

<ion-button expand="block" routerLink="/publication">Add Post</ion-button>